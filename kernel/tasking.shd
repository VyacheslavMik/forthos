











































































: fifo-queue Put task on a FIFO queue
    Next pointer is always null
    If there's a head...
        Point tail next at our node

        Else head is our node

    Tail is now our node

: (runit) The task is ready to run, so remove from queue and run it
    Save node and remove from queue
    Run it, and flag that we ran it





























































































Intern TIBS, #stack, #rstack constants from metacompiler



: fork Create new task
   Fork'ed tasks do not have heaps big enough to fork again

   Allocate a new user area, and clone ours
   Clone stacks











   Allocate private TIB space
   Point new user area into this TIB
   Create private memory for code dictionary
   Calculate rsp and sp in new task
                               Put 0 on top of new task's stack
   Put sp and 'resume on return stack
   Put updated RP into saved state



































































